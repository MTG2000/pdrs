(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[2],{123:function(e,t,n){},124:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(18),s=n.n(r),c=n(49),o=n(136),l=n(137),u=n(83),p=n(11),h=function(e){var t=e.store,n=t.username,a=t.role;return i.a.createElement(o.a,{collapseOnSelect:!0,expand:"lg",bg:"primary",variant:"dark",style:{zIndex:100}},i.a.createElement(o.a.Brand,{href:"/"},i.a.createElement("h4",{className:"no-gutters mb-0"},"P.D.R.S")),i.a.createElement(o.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),i.a.createElement(o.a.Collapse,{id:"responsive-navbar-nav"},i.a.createElement(l.a,{className:"ml-auto text-white"},"Doctor"===a&&i.a.createElement(p.b,{className:"nav-link text-white",to:"/new-prescription"},"New Prescription"),"Pharmacy"===a&&i.a.createElement(p.b,{className:"nav-link text-white",to:"/dispense-prescription"},"Dispense Prescription"),"Doctor"===a&&i.a.createElement(p.b,{className:"nav-link text-white",to:"/patients-prescriptions"},"Patinets Prescriptions"),"Admin"===a&&i.a.createElement(u.a,{className:"nav-link text-white",href:"/admin"},"Admin Dashboard"),n&&"Admin"!==a&&i.a.createElement(p.b,{className:"nav-link text-white",to:"/contact"},"Technical Support"),!n&&i.a.createElement(p.b,{className:"nav-link text-white",to:"/about"},"About"," "),n?i.a.createElement(p.b,{className:"nav-link text-white",to:"#",onClick:function(){t.Logout(),window.location="/login"}},"Logout"):i.a.createElement(p.b,{className:"nav-link text-white",to:"/login"},"Login"))))},m=function(){return i.a.createElement("footer",null)},f=n(6),d=n(134),v=n(31),g=n(20),b=n(84),y=function(e){var t=e.component,n=e.isAuth,a=void 0!==n&&n,r=Object(b.a)(e,["component","isAuth"]);return console.log("Private"),i.a.createElement(g.b,Object.assign({},r,{render:function(e){return a?i.a.createElement(t,e):i.a.createElement(g.a,{to:"/login"})}}))},N=n(48),P=n(55),k=i.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(6),n.e(11)]).then(n.bind(null,248))})),j=i.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(5),n.e(12)]).then(n.bind(null,246))})),x=i.a.lazy((function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,242))})),w=i.a.lazy((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,249))})),O=i.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(10),n.e(13)]).then(n.bind(null,250))})),S=i.a.lazy((function(){return Promise.all([n.e(0),n.e(8),n.e(14)]).then(n.bind(null,243))})),C=Object(N.a)((function(e){var t=e.store,n=t.username,a=t.role;return i.a.createElement(i.a.Suspense,{fallback:i.a.createElement(P.a,{fullPage:!0})},i.a.createElement(g.d,null,i.a.createElement(g.b,{path:"/login",component:x}),i.a.createElement(y,{path:"/contact",component:S,isAuth:n}),i.a.createElement(y,{path:"/new-prescription",component:j,isAuth:"Doctor"===a}),i.a.createElement(y,{path:"/dispense-prescription",component:O,isAuth:"Pharmacy"===a}),i.a.createElement(y,{path:"/patients-prescriptions",component:k,isAuth:n}),i.a.createElement(g.b,{path:"/",component:w})))}));var I=function(){var e=Object(a.useContext)(v.b).AppStore,t=Object(a.useState)(e),n=Object(c.a)(t,1)[0];return i.a.createElement("div",{className:"App"},i.a.createElement(f.NotificationContainer,null),i.a.createElement(h,{store:n}),i.a.createElement(d.a,null,i.a.createElement(C,{store:n})),i.a.createElement(m,null))},E=n(80),F=n(46);E.a.add(F.b,F.a);var M=n(81),A=n.n(M);n(122);A.a.init({offset:100,duration:700,easing:"ease-in-sine",delay:100});n(123),n(124);var T=n(135),D=n(82),L=Object(D.a)({typography:{fontFamily:["Titillium Web",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},palette:{primary:{main:"#007ebe"},secondary:{main:"#8bb6cb"}},overrides:{MuiOutlinedInput:{notchedOutline:{borderColor:"#007ebe",borderWidth:1}},MuiInputLabel:{root:{color:"#007ebe"}}}}),B=n(15),z=n(16),J=n(71),R=n(72),W=function(e){Object(R.a)(n,e);var t=Object(J.a)(n);function n(){return Object(B.a)(this,n),t.apply(this,arguments)}return Object(z.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),n}(a.Component),U=Object(g.g)(W),q=(n(125),function(e){return i.a.createElement(p.a,null,i.a.createElement(v.a,null,i.a.createElement(T.a,{theme:L},i.a.createElement(U,null,e.children))))});s.a.render(i.a.createElement(q,null,i.a.createElement(I,null)),document.getElementById("root"))},31:function(e,t,n){"use strict";n.d(t,"b",(function(){return N})),n.d(t,"a",(function(){return P}));var a=n(0),i=n.n(a),r=n(4),s=n.n(r),c=n(8),o=n(15),l=n(16),u=n(1),p=n(6),h=function(){function e(){Object(o.a)(this,e),this.patientId="",this.patientName="",this.showPatientNameInput=!1,this.note="",this.medicins=[],this.classifications=[],this.selectedClassification=-1,this.submitingPrescription=!1,this.loading=!0,this.redirect=!1}return Object(l.a)(e,[{key:"SetPatientId",value:function(e){this.patientId=e,this.FetchPatientName()}},{key:"SetPatientName",value:function(e){this.patientName=e}},{key:"FetchPatientName",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,a,i=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(this.patientId.length<6)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,fetch("/api/users/patient?id=".concat(this.patientId));case 5:return t=e.sent,e.next=8,t.json();case 8:n=e.sent,a=n.data,Object(u.p)((function(){a.Name?(i.patientName=a.Name,i.showPatientNameInput=!1):i.showPatientNameInput=!0})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),this.showPatientNameInput=!0,this.patientName="";case 17:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"FetchClassifications",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,a,i=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/medicins/classifications");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a=n.data,Object(u.p)((function(){i.classifications=a,i.loading=!1})),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"SelectClassification",value:function(e){this.selectedClassification=e}},{key:"AddMedicine",value:function(e){this.medicins.push(e)}},{key:"RemoveMedicin",value:function(e){this.medicins=this.medicins.filter((function(t,n){return n!==e}))}},{key:"ToggleChronic",value:function(e){this.medicins[e].isChronic=!this.medicins[e].isChronic}},{key:"ToggleBold",value:function(e){this.medicins[e].isBold=!this.medicins[e].isBold}},{key:"SetNote",value:function(e){this.note=e}},{key:"SubmitPrescription",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.submitingPrescription){e.next=3;break}return e.abrupt("return");case 3:return this.submitingPrescription=!0,t={patientId:this.patientId,patientName:this.patientName,note:this.note,medicins:Object(u.r)(this.medicins),classificationId:this.selectedClassification},e.next=7,fetch("/api/patients/new-prescription",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 7:if((n=e.sent).ok){e.next=10;break}throw Error();case 10:return e.next=12,n.json();case 12:p.NotificationManager.success("Prescription Created Successfully"),this.submitingPrescription=!1,setTimeout((function(){Object(u.p)((function(){a.redirect=!0}))}),3e3),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),p.NotificationManager.error("Prescription couldn't be created"),this.submitingPrescription=!1;case 21:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(){return e.apply(this,arguments)}}()}]),e}();Object(u.j)(h,{redirect:u.o,loading:u.o,selectedClassification:u.o,patientId:u.o,showPatientNameInput:u.o,submitingPrescription:u.o,patientName:u.o,note:u.o,medicins:u.o,classifications:u.o,AddMedicine:u.f,SetPatientId:u.f,FetchClassifications:u.f,RemoveMedicin:u.f,ToggleBold:u.f,ToggleChronic:u.f,SelectClassification:u.f,SetNote:u.f,SubmitPrescription:u.f,FetchPatientName:u.f,SetPatientName:u.f});var m=h,f=function(){function e(){Object(o.a)(this,e),this.patientId="",this.patientName="",this.classifications=[],this.allPrescriptions=[],this.prescriptions=[],this.chronicMedicins=[],this.selectedClassification=0,this.loading=!0,this.loadingPrescriptions=!1}return Object(l.a)(e,[{key:"SetPatientId",value:function(e){this.patientId=e,this.FetchPatientName(),this.FetchPrescriptions()}},{key:"FetchPatientName",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,a,i=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users/patient?id=".concat(this.patientId));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a=n.data,Object(u.p)((function(){i.patientName=a.Name})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),this.patientName="";case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"FilterPrescriptions",value:function(){var e=this;console.log(this.selectedClassification),this.selectedClassification?this.prescriptions=this.allPrescriptions.filter((function(t){return t.Classification_Id===e.selectedClassification})):this.prescriptions=this.allPrescriptions}},{key:"FetchClassifications",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,a,i=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/medicins/classifications");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a=n.data,Object(u.p)((function(){i.classifications=a,i.loading=!1})),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"FetchPrescriptions",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,a,i,r=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingPrescriptions&&this.abortController.abort(),e.prev=1,this.loadingPrescriptions=!0,t=(t="/api/patients/prescriptions?").concat("patientId=".concat(this.patientId)),this.abortController=new AbortController,this.signal=this.abortController.signal,e.next=9,fetch(t,{signal:this.signal});case 9:return n=e.sent,e.next=12,n.json();case 12:a=e.sent,i=a.data,console.log(i),Object(u.p)((function(){r.allPrescriptions=i.prescriptions,r.chronicMedicins=i.chronicMedicins,r.loadingPrescriptions=!1})),this.FilterPrescriptions(),e.next=26;break;case 19:if(e.prev=19,e.t0=e.catch(1),"AbortError"!==e.t0.name){e.next=23;break}return e.abrupt("return");case 23:console.log(e.t0),p.NotificationManager.error("Couldn't Get Prescriptions"),this.loadingPrescriptions=!1;case 26:case"end":return e.stop()}}),e,this,[[1,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"SelectClassification",value:function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===this.selectedClassification?this.selectedClassification=0:this.selectedClassification=t,!this.patientId||0!==this.allPrescriptions.length){e.next=6;break}return e.next=4,this.FetchPrescriptions();case 4:e.next=7;break;case 6:this.FilterPrescriptions();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Object(u.j)(f,{loading:u.o,loadingPrescriptions:u.o,selectedClassification:u.o,prescriptions:u.o,chronicMedicins:u.o,patientId:u.o,patientName:u.o,classifications:u.o,SetPatientId:u.f,FetchClassifications:u.f,SelectClassification:u.f,FetchPrescriptions:u.f,FetchPatientName:u.f});var d=f,v=function(){function e(){Object(o.a)(this,e),this.patientId="",this.patientName="",this.prescriptions=[],this.loading=!0,this.loadingPrescriptions=!1}return Object(l.a)(e,[{key:"SetPatientId",value:function(e){this.patientId=e,this.FetchPatientName(),this.FetchPrescriptions()}},{key:"FetchPatientName",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,a,i=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users/patients?id=".concat(this.patientId));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a=n.data,Object(u.p)((function(){i.patientName=a.Name})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),this.patientName="";case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"Dispense",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n,a,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:[],e.prev=1,e.next=4,fetch("/api/patients/dispense",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({prescriptionId:t,medicins:n})});case 4:if((a=e.sent).ok){e.next=7;break}throw Error();case 7:return e.next=9,a.json();case 9:p.NotificationManager.success("Prescription Dispensed Successfully"),this.FetchPrescriptions(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),p.NotificationManager.error("Couldn't Dispense Prescription");case 16:case"end":return e.stop()}}),e,this,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"FetchPrescriptions",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,a,i,r=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.loadingPrescriptions&&this.abortController.abort()}catch(s){}return e.prev=1,this.loadingPrescriptions=!0,t=(t="/api/patients/prescriptions-to-dispense?").concat("patientId=".concat(this.patientId)),this.abortController=new AbortController,this.signal=this.abortController.signal,e.next=9,fetch(t,{signal:this.signal});case 9:if((n=e.sent).ok){e.next=12;break}throw Error();case 12:return e.next=14,n.json();case 14:a=e.sent,i=a.data,Object(u.p)((function(){r.prescriptions=i.prescriptions,r.loadingPrescriptions=!1})),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0),p.NotificationManager.error("Couldn't Get Prescriptions"),this.loadingPrescriptions=!1;case 24:case"end":return e.stop()}}),e,this,[[1,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"SelectClassification",value:function(e){this.selectedClassification=e,this.patientId&&this.FetchPrescriptions()}}]),e}();Object(u.j)(v,{loading:u.o,loadingPrescriptions:u.o,prescriptions:u.o,patientId:u.o,patientName:u.o,SetPatientId:u.f,FetchPrescriptions:u.f,FetchPatientName:u.f});var g=v,b=function(){function e(){Object(o.a)(this,e),this.username="",this.role="",this.messagesCategories=[],this.username=localStorage.getItem("username"),this.role=localStorage.getItem("user-role"),this.doctorName=localStorage.getItem("doctorName")||void 0,this.pharmacyName=localStorage.getItem("pharmacyName")||void 0}return Object(l.a)(e,[{key:"Login",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n){var a,i,r,c=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})});case 3:return a=e.sent,e.next=6,a.json();case 6:i=e.sent,r=i.data,Object(u.p)((function(){c.role=r.role;var e="/";localStorage.removeItem("pharmacyName"),localStorage.removeItem("doctorName"),localStorage.setItem("username",r.username),localStorage.setItem("user-role",c.role),r.DoctorName?(c.doctorName=r.DoctorName,localStorage.setItem("doctorName",c.doctorName),p.NotificationManager.success("Welcome Back Doctor "+c.doctorName)):r.PharmacyName?(c.pharmacyName=r.PharmacyName,localStorage.setItem("pharmacyName",c.pharmacyName),p.NotificationManager.success("Welcome Back  ")):r.IsAdmin&&(e="/admin",p.NotificationManager.success("Welcome Back Admin ")),setTimeout((function(){Object(u.p)((function(){c.username=r.username,window.location=e}))}),3e3)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),p.NotificationManager.error("Couldn't Login with the provided credentials");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"SendRequest",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n,a,i){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users/request-account",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:t,type:n,phone:a,email:i})});case 3:return r=e.sent,e.next=6,r.json();case 6:c=e.sent,console.log(c),p.NotificationManager.success(" Your Request was sent successfuly"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),p.NotificationManager.error("Couldn't Login with the provided credentials");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n,a,i){return e.apply(this,arguments)}}()},{key:"Logout",value:function(){this.username=null,this.role=null,localStorage.removeItem("pharmacyName"),localStorage.removeItem("doctorName"),localStorage.removeItem("username"),localStorage.removeItem("user-role")}},{key:"FetchMessagesCategories",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,a,i=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users/messages-categories");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a=n.data,Object(u.p)((function(){i.messagesCategories=a})),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"SendMessage",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users/send-message",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({category:t,content:n})});case 3:if(e.sent.ok){e.next=6;break}throw Error("");case 6:p.NotificationManager.success(" Your Message was sent successfuly"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),p.NotificationManager.error("Something wrong happened while sending message");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();Object(u.j)(b,{username:u.o,role:u.o,messagesCategories:u.o,doctorName:u.o,pharmacyName:u.o,Login:u.f,Logout:u.f,FetchMessagesCategories:u.f});var y=new b,N=i.a.createContext(),P=function(e){return i.a.createElement(N.Provider,{value:{NewPrescriptionStore:m,PatientPrescriptionsStore:d,AppStore:y,PrescriptionsDispensingStore:g}},e.children)}},55:function(e,t,n){"use strict";var a=n(0),i=n.n(a),r=n(79),s=n.n(r),c=n(87);t.a=function(e){var t=Object(c.a)();return i.a.createElement("div",{className:"row justify-content-center align-content-center py-5",style:{minHeight:e.fullPage?"88vh":void 0}},i.a.createElement(s.a,Object.assign({height:55,width:8,margin:3,color:t.palette.primary.main,loading:!0},e)),i.a.createElement("h2",{className:"text-primary col-12 text-center py-2"},e.message||"Loading"))}},91:function(e,t,n){e.exports=n(126)}},[[91,3,4]]]);
//# sourceMappingURL=main.3cf48814.chunk.js.map