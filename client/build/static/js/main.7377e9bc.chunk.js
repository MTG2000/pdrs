(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[2],{103:function(e,t,n){e.exports=n(154)},151:function(e,t,n){},152:function(e,t,n){},154:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(20),s=n.n(r),c=n(52),o=n(4),l=n.n(o),u=n(5),p=n(164),h=n(165),m=n(95),f=n(13),d=function(e){var t=e.store,n=t.username,a=t.role;return i.a.createElement(p.a,{collapseOnSelect:!0,expand:"lg",bg:"primary",variant:"dark",style:{zIndex:100}},i.a.createElement(p.a.Brand,{href:"/"},i.a.createElement("h4",{className:"no-gutters mb-0"},"P.D.R.S")),i.a.createElement(p.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),i.a.createElement(p.a.Collapse,{id:"responsive-navbar-nav"},i.a.createElement(h.a,{className:"ml-auto text-white"},"Doctor"===a&&i.a.createElement(f.b,{className:"nav-link text-white",to:"/new-prescription"},"New Prescription"),"Pharmacy"===a&&i.a.createElement(f.b,{className:"nav-link text-white",to:"/dispense-prescription"},"Dispense Prescription"),"Doctor"===a&&i.a.createElement(f.b,{className:"nav-link text-white",to:"/patients-prescriptions"},"Patinets Prescriptions"),"Admin"===a&&i.a.createElement(m.a,{className:"nav-link text-white",href:"/admin"},"Admin Dashboard"),n&&"Admin"!==a&&i.a.createElement(f.b,{className:"nav-link text-white",to:"/contact"},"Technical Support"),!n&&i.a.createElement(f.b,{className:"nav-link text-white",to:"/about"},"About"," "),n?i.a.createElement(f.b,{className:"nav-link text-white",to:"#",onClick:Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.Logout();case 2:case"end":return e.stop()}}),e)})))},"Logout"):i.a.createElement(f.b,{className:"nav-link text-white",to:"/login"},"Login"))))},v=function(){return i.a.createElement("footer",null)},g=n(8),b=n(162),P=n(33),N=n(22),k=n(96),y=function(e){var t=e.component,n=e.isAuth,a=void 0!==n&&n,r=Object(k.a)(e,["component","isAuth"]);return console.log("Private"),i.a.createElement(N.b,Object.assign({},r,{render:function(e){return a?i.a.createElement(t,e):i.a.createElement(N.a,{to:"/login"})}}))},x=n(51),w=n(58),j=i.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(6),n.e(10)]).then(n.bind(null,274))})),I=i.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(5),n.e(12)]).then(n.bind(null,272))})),O=i.a.lazy((function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,268))})),C=i.a.lazy((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,275))})),S=i.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(11),n.e(13)]).then(n.bind(null,276))})),E=i.a.lazy((function(){return Promise.all([n.e(0),n.e(8),n.e(14)]).then(n.bind(null,269))})),F=Object(x.a)((function(e){var t=e.store,n=t.username,a=t.role;return i.a.createElement(i.a.Suspense,{fallback:i.a.createElement(w.a,{fullPage:!0})},i.a.createElement(N.d,null,i.a.createElement(N.b,{path:"/login",component:O}),i.a.createElement(y,{path:"/contact",component:E,isAuth:n}),i.a.createElement(y,{path:"/new-prescription",component:I,isAuth:"Doctor"===a}),i.a.createElement(y,{path:"/dispense-prescription",component:S,isAuth:"Pharmacy"===a}),i.a.createElement(y,{path:"/patients-prescriptions",component:j,isAuth:n}),i.a.createElement(N.b,{path:"/",component:C})))}));var M=function(){var e=Object(a.useContext)(P.b).AppStore,t=Object(a.useState)(e),n=Object(c.a)(t,1)[0];return i.a.createElement("div",{className:"App"},i.a.createElement(g.NotificationContainer,null),i.a.createElement(d,{store:n}),i.a.createElement(b.a,null,i.a.createElement(F,{store:n})),i.a.createElement(v,null))},A=n(92),T=n(49);A.a.add(T.b,T.a);var D=n(93),L=n.n(D);n(150);L.a.init({offset:100,duration:700,easing:"ease-in-sine",delay:100});var B=n(7),z=n.n(B);z.a.interceptors.response.use((function(e){return e}),function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Token Expired"!==t.response.data){e.next=7;break}return e.next=3,z.a.post("/api/users/refresh-token",{username:localStorage.getItem("username"),refreshToken:localStorage.getItem("refreshToken")});case 3:return e.next=5,z()(t.config);case 5:return n=e.sent,e.abrupt("return",Promise.resolve(n));case 7:return e.abrupt("return",Promise.reject(t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());n(151),n(152);var R=n(163),W=n(94),U=Object(W.a)({typography:{fontFamily:["Titillium Web",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},palette:{primary:{main:"#007ebe"},secondary:{main:"#8bb6cb"}},overrides:{MuiOutlinedInput:{notchedOutline:{borderColor:"#007ebe",borderWidth:1}},MuiInputLabel:{root:{color:"#007ebe"}}}}),q=n(17),G=n(18),H=n(83),J=n(84),Y=function(e){Object(J.a)(n,e);var t=Object(H.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(G.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),n}(a.Component),_=Object(N.g)(Y),K=(n(153),function(e){return i.a.createElement(f.a,null,i.a.createElement(P.a,null,i.a.createElement(R.a,{theme:U},i.a.createElement(_,null,e.children))))});s.a.render(i.a.createElement(K,null,i.a.createElement(M,null)),document.getElementById("root"))},33:function(e,t,n){"use strict";n.d(t,"b",(function(){return x})),n.d(t,"a",(function(){return w}));var a=n(0),i=n.n(a),r=n(59),s=n(4),c=n.n(s),o=n(5),l=n(17),u=n(18),p=n(1),h=n(8),m=n(7),f=n.n(m),d=function(){function e(){Object(l.a)(this,e),this.patientId="",this.patientName="",this.showPatientNameInput=!1,this.note="",this.medicins=[],this.classifications=[],this.selectedClassification=-1,this.submitingPrescription=!1,this.loading=!0,this.redirect=!1}return Object(u.a)(e,[{key:"SetPatientId",value:function(e){this.patientId=e,this.FetchPatientName()}},{key:"SetPatientName",value:function(e){this.patientName=e}},{key:"FetchPatientName",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,n,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(this.patientId.length<6)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,f.a.get("/api/users/patient?id=".concat(this.patientId));case 5:t=e.sent,n=t.data.data,Object(p.p)((function(){n.Name?(a.patientName=n.Name,a.showPatientNameInput=!1):a.showPatientNameInput=!0})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),this.showPatientNameInput=!0,this.patientName="";case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"FetchClassifications",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,n,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/api/medicins/classifications");case 3:t=e.sent,n=t.data.data,Object(p.p)((function(){a.classifications=n,a.loading=!1})),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"SelectClassification",value:function(e){this.selectedClassification=e}},{key:"AddMedicine",value:function(e){this.medicins.push(e)}},{key:"RemoveMedicin",value:function(e){this.medicins=this.medicins.filter((function(t,n){return n!==e}))}},{key:"ToggleChronic",value:function(e){this.medicins[e].isChronic=!this.medicins[e].isChronic}},{key:"ToggleBold",value:function(e){this.medicins[e].isBold=!this.medicins[e].isBold}},{key:"SetNote",value:function(e){this.note=e}},{key:"SubmitPrescription",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.submitingPrescription){e.next=3;break}return e.abrupt("return");case 3:return this.submitingPrescription=!0,t={patientId:this.patientId,patientName:this.patientName,note:this.note,medicins:Object(p.r)(this.medicins),classificationId:this.selectedClassification},e.next=7,f.a.post("/api/patients/new-prescription",Object(r.a)({},t));case 7:h.NotificationManager.success("Prescription Created Successfully"),this.submitingPrescription=!1,setTimeout((function(){Object(p.p)((function(){n.redirect=!0}))}),3e3),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),h.NotificationManager.error("Prescription couldn't be created"),this.submitingPrescription=!1;case 16:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()}]),e}();Object(p.j)(d,{redirect:p.o,loading:p.o,selectedClassification:p.o,patientId:p.o,showPatientNameInput:p.o,submitingPrescription:p.o,patientName:p.o,note:p.o,medicins:p.o,classifications:p.o,AddMedicine:p.f,SetPatientId:p.f,FetchClassifications:p.f,RemoveMedicin:p.f,ToggleBold:p.f,ToggleChronic:p.f,SelectClassification:p.f,SetNote:p.f,SubmitPrescription:p.f,FetchPatientName:p.f,SetPatientName:p.f});var v=d,g=function(){function e(){Object(l.a)(this,e),this.patientId="",this.patientName="",this.classifications=[],this.allPrescriptions=[],this.prescriptions=[],this.chronicMedicins=[],this.selectedClassification=0,this.loading=!0,this.loadingPrescriptions=!1}return Object(u.a)(e,[{key:"SetPatientId",value:function(e){this.patientId=e,this.FetchPatientName(),this.FetchPrescriptions()}},{key:"FetchPatientName",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,n,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/api/users/patient?id=".concat(this.patientId));case 3:t=e.sent,n=t.data.data,Object(p.p)((function(){a.patientName=n.Name})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.patientName="";case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"FilterPrescriptions",value:function(){var e=this;this.selectedClassification?this.prescriptions=this.allPrescriptions.filter((function(t){return t.Classification_Id===e.selectedClassification})):this.prescriptions=this.allPrescriptions}},{key:"FetchClassifications",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,n,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/api/medicins/classifications");case 3:t=e.sent,n=t.data.data,Object(p.p)((function(){a.classifications=n,a.loading=!1})),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"FetchPrescriptions",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,n,a,i=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingPrescriptions&&this.abortController.abort(),e.prev=1,this.loadingPrescriptions=!0,t=(t="/api/patients/prescriptions?").concat("patientId=".concat(this.patientId)),this.abortController=new AbortController,this.signal=this.abortController.signal,e.next=9,f.a.get(t);case 9:n=e.sent,a=n.data.data,Object(p.p)((function(){i.allPrescriptions=a.prescriptions,i.chronicMedicins=a.chronicMedicins,i.loadingPrescriptions=!1})),this.FilterPrescriptions(),e.next=22;break;case 15:if(e.prev=15,e.t0=e.catch(1),"AbortError"!==e.t0.name){e.next=19;break}return e.abrupt("return");case 19:console.log(e.t0),h.NotificationManager.error("Couldn't Get Prescriptions"),this.loadingPrescriptions=!1;case 22:case"end":return e.stop()}}),e,this,[[1,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"SelectClassification",value:function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===this.selectedClassification?this.selectedClassification=0:this.selectedClassification=t,!this.patientId||0!==this.allPrescriptions.length){e.next=6;break}return e.next=4,this.FetchPrescriptions();case 4:e.next=7;break;case 6:this.FilterPrescriptions();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Object(p.j)(g,{loading:p.o,loadingPrescriptions:p.o,selectedClassification:p.o,prescriptions:p.o,chronicMedicins:p.o,patientId:p.o,patientName:p.o,classifications:p.o,SetPatientId:p.f,FetchClassifications:p.f,SelectClassification:p.f,FetchPrescriptions:p.f,FetchPatientName:p.f});var b=g,P=function(){function e(){Object(l.a)(this,e),this.patientId="",this.patientName="",this.prescriptions=[],this.loading=!0,this.loadingPrescriptions=!1}return Object(u.a)(e,[{key:"SetPatientId",value:function(e){this.patientId=e,this.FetchPatientName(),this.FetchPrescriptions()}},{key:"FetchPatientName",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,n,a,i=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/api/users/patients?id=".concat(this.patientId));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a=n.data,Object(p.p)((function(){i.patientName=a.Name})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),this.patientName="";case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"Dispense",value:function(){var e=Object(o.a)(c.a.mark((function e(t){var n,a=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:[],e.prev=1,e.next=4,f.a.post("/api/patients/dispense",{prescriptionId:t,medicins:n});case 4:h.NotificationManager.success("Prescription Dispensed Successfully"),this.FetchPrescriptions(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),h.NotificationManager.error("Couldn't Dispense Prescription");case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"FetchPrescriptions",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,n,a,i,r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.loadingPrescriptions&&this.abortController.abort()}catch(s){}return e.prev=1,this.loadingPrescriptions=!0,t=(t="/api/patients/prescriptions-to-dispense?").concat("patientId=".concat(this.patientId)),this.abortController=new AbortController,this.signal=this.abortController.signal,e.next=9,f.a.get(t);case 9:return n=e.sent,e.next=12,n.json();case 12:a=e.sent,i=a.data,Object(p.p)((function(){r.prescriptions=i.prescriptions,r.loadingPrescriptions=!1})),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0),h.NotificationManager.error("Couldn't Get Prescriptions"),this.loadingPrescriptions=!1;case 22:case"end":return e.stop()}}),e,this,[[1,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"SelectClassification",value:function(e){this.selectedClassification=e,this.patientId&&this.FetchPrescriptions()}}]),e}();Object(p.j)(P,{loading:p.o,loadingPrescriptions:p.o,prescriptions:p.o,patientId:p.o,patientName:p.o,SetPatientId:p.f,FetchPrescriptions:p.f,FetchPatientName:p.f});var N=P,k=function(){function e(){Object(l.a)(this,e),this.username="",this.role="",this.messagesCategories=[],this.username=localStorage.getItem("username"),this.role=localStorage.getItem("user-role"),this.doctorName=localStorage.getItem("doctorName")||void 0,this.pharmacyName=localStorage.getItem("pharmacyName")||void 0}return Object(u.a)(e,[{key:"Login",value:function(){var e=Object(o.a)(c.a.mark((function e(t,n){var a,i,r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("/api/users/login",{username:t,password:n});case 3:a=e.sent,i=a.data.data,Object(p.p)((function(){r.role=i.role,localStorage.setItem("refreshToken",i.refreshToken);var e="/";localStorage.removeItem("pharmacyName"),localStorage.removeItem("doctorName"),localStorage.setItem("username",i.username),localStorage.setItem("user-role",r.role),i.DoctorName?(r.doctorName=i.DoctorName,localStorage.setItem("doctorName",r.doctorName),h.NotificationManager.success("Welcome Back Doctor "+r.doctorName)):i.PharmacyName?(r.pharmacyName=i.PharmacyName,localStorage.setItem("pharmacyName",r.pharmacyName),h.NotificationManager.success("Welcome Back  ")):i.IsAdmin&&(e="/admin",h.NotificationManager.success("Welcome Back Admin ")),setTimeout((function(){Object(p.p)((function(){r.username=i.username,window.location=e}))}),3e3)})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h.NotificationManager.error("Couldn't Login with the provided credentials");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"SendRequest",value:function(){var e=Object(o.a)(c.a.mark((function e(t,n,a,i){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("/api/users/request-account",{name:t,type:n,phone:a,email:i});case 3:h.NotificationManager.success(" Your Request was sent successfuly"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),h.NotificationManager.error("Couldn't Login with the provided credentials");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,a,i){return e.apply(this,arguments)}}()},{key:"Logout",value:function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/api/users/logout");case 3:localStorage.removeItem("pharmacyName"),localStorage.removeItem("doctorName"),localStorage.removeItem("username"),localStorage.removeItem("user-role"),window.location="/login",e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"FetchMessagesCategories",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,n,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/api/users/messages-categories");case 3:t=e.sent,n=t.data.data,Object(p.p)((function(){a.messagesCategories=n})),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"SendMessage",value:function(){var e=Object(o.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("/api/users/send-message",{category:t,content:n});case 3:h.NotificationManager.success(" Your Message was sent successfuly"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),h.NotificationManager.error("Something wrong happened while sending message");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();Object(p.j)(k,{username:p.o,role:p.o,messagesCategories:p.o,doctorName:p.o,pharmacyName:p.o,Login:p.f,Logout:p.f,FetchMessagesCategories:p.f});var y=new k,x=i.a.createContext(),w=function(e){return i.a.createElement(x.Provider,{value:{NewPrescriptionStore:v,PatientPrescriptionsStore:b,AppStore:y,PrescriptionsDispensingStore:N}},e.children)}},58:function(e,t,n){"use strict";var a=n(0),i=n.n(a),r=n(91),s=n.n(r),c=n(99);t.a=function(e){var t=Object(c.a)();return i.a.createElement("div",{className:"row justify-content-center align-content-center py-5",style:{minHeight:e.fullPage?"88vh":void 0}},i.a.createElement(s.a,Object.assign({height:55,width:8,margin:3,color:t.palette.primary.main,loading:!0},e)),i.a.createElement("h2",{className:"text-primary col-12 text-center py-2"},e.message||"Loading"))}}},[[103,3,4]]]);
//# sourceMappingURL=main.7377e9bc.chunk.js.map